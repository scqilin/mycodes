<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>魔方</title>
    <script type="text/javascript" src="../js/three.js"></script>
    <script type="text/javascript" src="../js/TrackballControls.js"></script>
    <style type="text/css">
        body{margin: 0;overflow: hidden;}
    </style>
</head>
<body>
<div id="WebGL-output"></div>
<div id="but1" style="position: absolute;top: 0;left: 0"><button onclick="AA()">AA</button> </div>
<div id="but3" style="position: absolute;top: 30px;left: 0"><button onclick="CC()">CC</button> </div>
<script type="text/javascript">
    function init() {
        var scene = new THREE.Scene();
        var camera = new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,0.1,1000);
        camera.position.set(30,30,30);
        camera.lookAt(scene.position);
        var renderer = new THREE.WebGLRenderer();
        renderer.setSize(innerWidth,window.innerHeight);
        renderer.setClearColor('#a3bdc0');

        var colors = ['0xff0033','0xffff00','0xff00ff','0x00ff00','0x0000ff','0x00ffff'];
        var cubeGeometry = new THREE.BoxGeometry(4, 4, 4);
        var num = 0;
        for(var x=-1;x<2;x++){
            for(var y=-1;y<2;y++){
                for(var z=-1;z<2;z++){
                    for(var c = 0;c<cubeGeometry.faces.length;c=c+2){
                        cubeGeometry.faces[ c ].color.setHex( colors[c/2] );
                        cubeGeometry.faces[ c+1 ].color.setHex( colors[c/2] );
                    }
                    var cubeMaterial = new THREE.MeshBasicMaterial( {
                        vertexColors: THREE.FaceColors,
                    } );
                    var cube = new THREE.Mesh(cubeGeometry, cubeMaterial);
                    num++;
                    cube.name = 'cube'+num;
                    scene.add(cube);
                    cube.position.set(x*4.1,y*4.1,z*4.1);
                }
            }
        }


       /* var xxxx = scene.getObjectByName('cube1');
        console.log(xxxx);*/

        var amblight = new THREE.AmbientLight(0xCCCCCC);
        scene.add(amblight);
        var spotlight = new THREE.SpotLight(0x777777);
        spotlight.position.set(40,50,40);
        scene.add(spotlight);

        var axes = new THREE.AxisHelper(30);
        scene.add(axes);

        var yz1 = ['1','2','3','4','5','6','7','8','9'];
        var yz2 = ['10','11','12','13','14','15','16','17','18'];

        var xz1 = ['7','8','9','16','17','18','25','26','27'];

        function xz1group () {
            changename();
            for(var i=0;i<9;i++){
               scene.getObjectByName('cube'+xz1[i]).position.y = 10;
            }
        }

        var aa = false;
        var cc = false;
        AA = function () {
            aa = true;
        }
        CC = function () {
            cc = true;
        }
        //changeneme();
        changename = function () {
            for(var i = 3; i<30; i++){
                var temcube = scene.getObjectById(i);
                var positi = temcube.position;
                //console.log(i);
                //console.log(temcube);
                if(positi.x == -4.1&&positi.y == -4.1&&positi.z == -4.1){
                    temcube.name = 'cube1';
                }if(positi.x == -4.1&&positi.y == -4.1&&positi.z == 0 ){
                    temcube.name = 'cube2';
                }if(positi.x == -4.1&&positi.y == -4.1&&positi.z == 4.1 ){
                    temcube.name = 'cube3';
                }if(positi.x == -4.1&&positi.y ==0&&positi.z == -4.1 ){
                    temcube.name = 'cube4';
                }if(positi.x == -4.1&&positi.y == 0&&positi.z == 0 ){
                    temcube.name = 'cube5';
                }if(positi.x == -4.1&&positi.y == 0&&positi.z == 4.1 ){
                    temcube.name = 'cube6';
                }if(positi.x == -4.1&&positi.y ==  4.1&&positi.z == -4.1 ){
                    temcube.name = 'cube7';
                }if(positi.x == -4.1&&positi.y ==  4.1&&positi.z == 0 ){
                    temcube.name = 'cube8';
                }if(positi.x == -4.1&&positi.y ==  4.1&&positi.z == 4.1 ){
                    temcube.name = 'cube9';
                }if(positi.x == 0&&positi.y ==  -4.1&&positi.z == 4.1 ){
                    temcube.name = 'cube10';
                }if(positi.x == 0&&positi.y ==  -4.1&&positi.z == 0 ){
                    temcube.name = 'cube11';
                }if(positi.x == 0&&positi.y ==  -4.1&&positi.z == 4.1 ){
                    temcube.name = 'cube12';
                }if(positi.x == 0&&positi.y ==  0&&positi.z == -4.1 ){
                    temcube.name = 'cube13';
                }if(positi.x == 0&&positi.y ==  0&&positi.z == 0 ){
                    temcube.name = 'cube14';
                }if(positi.x == 0&&positi.y ==  0&&positi.z == 4.1 ){
                    temcube.name = 'cube15';
                }if(positi.x == 0&&positi.y ==  4.1&&positi.z == -4.1 ){
                    temcube.name = 'cube16';
                }if(positi.x == 0&&positi.y ==  4.1&&positi.z == 0 ){
                    temcube.name = 'cube17';
                }if(positi.x == 0&&positi.y ==  4.1&&positi.z == 4.1 ){
                    temcube.name = 'cube18';
                }if(positi.x == 4.1&&positi.y ==  -4.1&&positi.z == -4.1 ){
                    temcube.name = 'cube19';
                }if(positi.x == 4.1&&positi.y ==  -4.1&&positi.z == 0 ){
                    temcube.name = 'cube20';
                }if(positi.x == 4.1&&positi.y ==  -4.1&&positi.z == 4.1 ){
                    temcube.name = 'cube21';
                }if(positi.x == 4.1&&positi.y ==  0&&positi.z == -4.1 ){
                    temcube.name = 'cube22';
                }if(positi.x == 4.1&&positi.y ==  0&&positi.z == 0 ){
                    temcube.name = 'cube23';
                }if(positi.x == 4.1&&positi.y ==  0&&positi.z == 4.1 ){
                    temcube.name = 'cube24';
                }if(positi.x == 4.1&&positi.y ==  4.1&&positi.z == -4.1 ){
                    temcube.name = 'cube25';
                }if(positi.x == 4.1&&positi.y ==  4.1&&positi.z == 0 ){
                    temcube.name = 'cube26';
                }if(positi.x == 4.1&&positi.y ==  4.1&&positi.z == 4.1 ){
                    temcube.name = 'cube27';
                }
            }
        }
        var numaa = 0;
        document.getElementById('WebGL-output').appendChild(renderer.domElement);
        renderer.render(scene,camera);
        var trackballControls = new THREE.TrackballControls(camera);
        trackballControls.panSpeed = 0;
        var clock = new THREE.Clock();
        function renderscence() {
            var delta = clock.getDelta();
            trackballControls.update(delta);

            if(aa){
                numaa +=1;
                changename();
                for(var i=0;i<9;i++){
                    var yr = scene.getObjectByName('cube'+yz1[i]).position.y;
                    var zr = scene.getObjectByName('cube'+yz1[i]).position.z;
                    var rr = Math.sqrt(yr*yr+zr*zr);
                    scene.getObjectByName('cube'+yz1[i]).position.y = rr*Math.cos(numaa);
                    scene.getObjectByName('cube'+yz1[i]).position.z = rr*Math.sin(numaa);
                }
                if(numaa == 90){
                    aa = false;
                    numaa = 0;
                }
            }
            if(cc){
                xz1group();
                numaa +=1;
                //groupxz1.rotation.y += 0.02*Math.PI;
                if(numaa == 25){
                    cc = false;
                    numaa = 0;
                    //changename();
                }
            }
            requestAnimationFrame(renderscence);
            renderer.render(scene,camera);
        }
        renderscence();
        function onResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        window.addEventListener('resize', onResize, false);
    }

    window.onload = init;
</script>
</body>
</html>